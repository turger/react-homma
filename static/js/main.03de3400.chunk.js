(window["webpackJsonpviisasten-kivi"]=window["webpackJsonpviisasten-kivi"]||[]).push([[0],{160:function(t,e,n){t.exports=n(377)},165:function(t,e,n){},167:function(t,e,n){},168:function(t,e,n){},184:function(t,e){},186:function(t,e){},218:function(t,e){},219:function(t,e){},284:function(t,e){},377:function(t,e,n){"use strict";n.r(e);var a=n(6),r=n.n(a),o=n(159),i=n.n(o),c=(n(165),n(28)),s=n.n(c),u=n(64),l=n(59),p=n(60),m=n(62),f=n(61),h=n(63),d=(n(167),function(t){function e(){var t,n;Object(l.a)(this,e);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(m.a)(this,(t=Object(f.a)(e)).call.apply(t,[this].concat(r)))).toHhMm=function(t){var e=new Date(1e3*t),n=e.getUTCHours(),a=("0"+e.getUTCMinutes()).slice(-2);return"".concat(n,":").concat(a)},n}return Object(h.a)(e,t),Object(p.a)(e,[{key:"render",value:function(){var t=this,e=this.props.stopsData;return e?(console.log("stopsData",e),r.a.createElement("div",{className:"Timetable"},e.map(function(e){return r.a.createElement("div",{className:"Timetable_stop",key:e.gtfsId},r.a.createElement("h2",null,e.name),r.a.createElement("table",null,r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Kulkuv\xe4line"),r.a.createElement("th",null,"L\xe4ht\xf6aika"))),r.a.createElement("tbody",null,e.stoptimesWithoutPatterns.map(function(e){return r.a.createElement("tr",{key:"".concat(e.trip.route.gtfsId,"-").concat(e.realtimeArrival)},r.a.createElement("td",null,e.trip.route.mode," ",e.trip.route.shortName),r.a.createElement("td",null,t.toHhMm(e.realtimeArrival)))}))))}))):null}}]),e}(a.Component)),v=(n(168),n(169)),g=function(){return Math.round((new Date).getTime()/1e3)},w=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g();return new Promise(function(e){v.post({url:"https://api.digitransit.fi/routing/v1/routers/hsl/index/graphql",headers:{"Content-Type":"application/graphql"},body:"{ stops(ids: ".concat('["HSL:1310102", "HSL:1020171"]',') {\n                name\n                gtfsId\n                stoptimesWithoutPatterns(\n                  startTime:"').concat(t,'",\n                  timeRange: 180000,\n                  numberOfDepartures:10\n                ) {\n                  realtimeArrival\n                  trip {\n                    route {\n                      gtfsId\n                      longName\n                      shortName\n                      mode\n                    }\n                  }\n                }\n              }\n            }')},function(t,n,a){if(t)return console.error("Stops data upload failed:",t);e(JSON.parse(a))})})},b=function(t){function e(){var t;return Object(l.a)(this,e),(t=Object(m.a)(this,Object(f.a)(e).call(this))).getStopsData=Object(u.a)(s.a.mark(function e(){var n;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w();case 2:n=e.sent,console.log("Response:",n),t.setState({stopsData:n.data.stops});case 5:case"end":return e.stop()}},e)})),t.state={stopsData:[]},t}return Object(h.a)(e,t),Object(p.a)(e,[{key:"componentDidMount",value:function(){var t=Object(u.a)(s.a.mark(function t(){var e=this;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.getStopsData();case 2:setInterval(Object(u.a)(s.a.mark(function t(){return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getStopsData();case 2:case"end":return t.stop()}},t)})),6e4);case 3:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},{key:"render",value:function(){return r.a.createElement("div",{className:"App"},r.a.createElement("h1",null,"Aikataulu"),r.a.createElement(d,{stopsData:this.state.stopsData}))}}]),e}(a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(b,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(t){t.unregister()})}},[[160,1,2]]]);
//# sourceMappingURL=main.03de3400.chunk.js.map